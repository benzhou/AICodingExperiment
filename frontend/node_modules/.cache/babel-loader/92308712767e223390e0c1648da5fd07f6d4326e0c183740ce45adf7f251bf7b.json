{"ast":null,"code":"var _jsxFileName = \"/Users/benzhou/workspace/AICoding/frontend/src/components/TokenDebug.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { authService } from '../services/authService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UPDATE_INTERVAL = 10000; // 10 seconds\n\nexport function TokenDebug() {\n  _s();\n  const [tokenInfo, setTokenInfo] = useState({\n    token: null,\n    decodedToken: null,\n    expiresIn: null,\n    isValid: false\n  });\n  useEffect(() => {\n    const updateTokenInfo = async () => {\n      const token = authService.getToken();\n      if (!token) {\n        setTokenInfo({\n          token: null,\n          decodedToken: null,\n          expiresIn: null,\n          isValid: false\n        });\n        return;\n      }\n      try {\n        // Decode token (JWT is base64 encoded)\n        const [header, payload] = token.split('.').slice(0, 2);\n        const decodedToken = JSON.parse(atob(payload));\n\n        // Get token info from server\n        const info = await authService.getTokenInfo();\n        setTokenInfo({\n          token,\n          decodedToken,\n          expiresIn: info.expires_in,\n          isValid: info.expires_in > 0\n        });\n      } catch (error) {\n        setTokenInfo({\n          token,\n          decodedToken: null,\n          expiresIn: null,\n          isValid: false\n        });\n      }\n    };\n    updateTokenInfo(); // Initial call\n    const interval = setInterval(updateTokenInfo, UPDATE_INTERVAL); // Update every 10 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n  if (!tokenInfo.token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-gray-100 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-2\",\n        children: \"Token Debug\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-600\",\n        children: \"No token found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 bg-gray-100 rounded-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-lg font-semibold mb-2\",\n      children: \"Token Debug\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-medium\",\n          children: \"Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${tokenInfo.isValid ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n          children: tokenInfo.isValid ? 'Valid' : 'Invalid'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), tokenInfo.expiresIn !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-medium\",\n          children: \"Expires In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [Math.max(0, tokenInfo.expiresIn), \" seconds\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), tokenInfo.decodedToken && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-medium\",\n          children: \"Token Payload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"mt-1 bg-gray-800 text-gray-100 p-2 rounded text-sm overflow-x-auto\",\n          children: JSON.stringify(tokenInfo.decodedToken, null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-medium\",\n          children: \"Raw Token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-1 bg-gray-800 text-gray-100 p-2 rounded text-sm overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"code\", {\n            className: \"break-all\",\n            children: tokenInfo.token\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(TokenDebug, \"m8ul5S/ULM2UswvZ5FZjeo09cGQ=\");\n_c = TokenDebug;\nvar _c;\n$RefreshReg$(_c, \"TokenDebug\");","map":{"version":3,"names":["React","useState","useEffect","authService","jsxDEV","_jsxDEV","UPDATE_INTERVAL","TokenDebug","_s","tokenInfo","setTokenInfo","token","decodedToken","expiresIn","isValid","updateTokenInfo","getToken","header","payload","split","slice","JSON","parse","atob","info","getTokenInfo","expires_in","error","interval","setInterval","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Math","max","stringify","_c","$RefreshReg$"],"sources":["/Users/benzhou/workspace/AICoding/frontend/src/components/TokenDebug.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { authService } from '../services/authService';\n\ninterface DecodedToken {\n  user_id: string;\n  email: string;\n  exp: number;\n}\n\nconst UPDATE_INTERVAL = 10000; // 10 seconds\n\nexport function TokenDebug() {\n  const [tokenInfo, setTokenInfo] = useState<{\n    token: string | null;\n    decodedToken: DecodedToken | null;\n    expiresIn: number | null;\n    isValid: boolean;\n  }>({\n    token: null,\n    decodedToken: null,\n    expiresIn: null,\n    isValid: false,\n  });\n\n  useEffect(() => {\n    const updateTokenInfo = async () => {\n      const token = authService.getToken();\n      if (!token) {\n        setTokenInfo({\n          token: null,\n          decodedToken: null,\n          expiresIn: null,\n          isValid: false,\n        });\n        return;\n      }\n\n      try {\n        // Decode token (JWT is base64 encoded)\n        const [header, payload] = token.split('.').slice(0, 2);\n        const decodedToken = JSON.parse(atob(payload)) as DecodedToken;\n        \n        // Get token info from server\n        const info = await authService.getTokenInfo();\n\n        setTokenInfo({\n          token,\n          decodedToken,\n          expiresIn: info.expires_in,\n          isValid: info.expires_in > 0,\n        });\n      } catch (error) {\n        setTokenInfo({\n          token,\n          decodedToken: null,\n          expiresIn: null,\n          isValid: false,\n        });\n      }\n    };\n\n    updateTokenInfo(); // Initial call\n    const interval = setInterval(updateTokenInfo, UPDATE_INTERVAL); // Update every 10 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (!tokenInfo.token) {\n    return (\n      <div className=\"p-4 bg-gray-100 rounded-lg\">\n        <h2 className=\"text-lg font-semibold mb-2\">Token Debug</h2>\n        <p className=\"text-red-600\">No token found</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 bg-gray-100 rounded-lg\">\n      <h2 className=\"text-lg font-semibold mb-2\">Token Debug</h2>\n      \n      <div className=\"space-y-4\">\n        <div>\n          <h3 className=\"font-medium\">Status</h3>\n          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n            tokenInfo.isValid ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n          }`}>\n            {tokenInfo.isValid ? 'Valid' : 'Invalid'}\n          </span>\n        </div>\n\n        {tokenInfo.expiresIn !== null && (\n          <div>\n            <h3 className=\"font-medium\">Expires In</h3>\n            <p>{Math.max(0, tokenInfo.expiresIn)} seconds</p>\n          </div>\n        )}\n\n        {tokenInfo.decodedToken && (\n          <div>\n            <h3 className=\"font-medium\">Token Payload</h3>\n            <pre className=\"mt-1 bg-gray-800 text-gray-100 p-2 rounded text-sm overflow-x-auto\">\n              {JSON.stringify(tokenInfo.decodedToken, null, 2)}\n            </pre>\n          </div>\n        )}\n\n        <div>\n          <h3 className=\"font-medium\">Raw Token</h3>\n          <div className=\"mt-1 bg-gray-800 text-gray-100 p-2 rounded text-sm overflow-x-auto\">\n            <code className=\"break-all\">{tokenInfo.token}</code>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}